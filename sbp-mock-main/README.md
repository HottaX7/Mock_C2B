# Заглушка СБП

### Поддерживаемые операции

- исходящий С2С перевод
- входящий С2С перевод
- исходящий C2B перевод

### Запуск

В репозитории находится бинарный файл `c2b_mock_0209`, собранный для linux. Для его запуска необходимо выполнить команду `./2b_mock_0209`.

### Настройки

Можно указывать через конфиг файл, либо переменные среды

| Параметр | Описание |Пример значения |
|----------|----------|----------|
| LISTEN_ADDRESS    | Порт, на котором поднимается заглушка   | :9201   |
| CALLBACK_ADDRESS    | Адрес IPS-Adapter, куда НСПК отправляет асиинхронный ответ   | https://ips-haproxy-sandbox.rshb.ru:5990   |
| CALLBACK_DELAY    | Задержка перед отправкой асинхронного ответа   | 1s   |
| INFLUX_ADDRESS    | Адрес Influx для отправки метрик   | http://10.21.25.119:8086   |
| INFLUX_DATABASE    | База Influx для отправки метрик   | ESPP_SBP_MOCK/autogen   |

### Флаги

| Параметр | Описание |Пример значения |
|----------|----------|----------|
| --config    | Путь до конфиг файла   | ./config.yaml   |

### Сборка

`$ GOOS=linux GOARCH=amd64 CGO_ENABLED=0 go build -trimpath -buildvcs=false -o с2b_mock_2908`

### Запуск

`LISTEN_ADDRESS=:9201 CALLBACK_ADDRESS=http://10.21.58.91:11502 ./с2b_mock_2908`